# Chap02 이상한 나라의 객체

> 소프트웨어를 생물로 생각하자. 모든 생물처럼 소프트웨어는 태어나고, 삶을 영위하고, 그리고 죽는다.

---

## 객체지향과 인지 능력

많은 사람들이 객체지향을 직관적이고 이해하기 쉬운 패러다임이라 말하는 이유는  
객체지향이 인간의 기본적인 **인지 능력**에 기반을 두고 있기 때문이다.

자동차, 가로수, 컴퓨터 등 하나의 단위들이 우리 주변에 존재하고  
이러한 것들이 모여 객체의 스펙트럼을 완성한다.

인간은 더 단순한 객체들로 분해함으로써 세상을 이해하려 노력한다.  
**즉, 객체는 인간이 분명하게 인지하고 구별할 수 있는 물리적, 개념적 경계를 지닌 어떤 것이다.**

단, 유사성은 이뿐만이 아니다.  
현실세계의 전등은 사람 손길 없이 불을 밝힐 수 없지만,  
소프트웨어 세계 전등은 객체 스스로 전원을 켤 수 있다.

이처럼 유사성도 가지고 있지만, 객체지향 애플리케이션을 들여다보면  
현실과는 이질적인 모습을 지니고 있다는 것을 알게 될 것이다.

---

## 객체, 그리고 이상한 나라

이상한 나라의 앨리스 동화에서도 볼 수 있듯  
**어떤 행동의 성공 여부는 이전에 어떤 행동들이 발생했는지에** 영향을 받는다.

동화 속 앨리스의 상태가 엄청나게 커지거나 작아지더라도, 앨리스는 앨리스다.  
끊임없이 상태가 변하지만, **유일한 존재로 식별**이 가능하다는 것이다.  
앨리스 동화는 객체지향 세계의 객체들과 공통점이 존재한다.

---

## 객체, 그리고 소프트웨어 나라

객체를 **상태(state)**, **행동(behavior)**, **식별자(identity)** 를 지닌 실체로 보는 것이  
가장 효과적이다. 이상한 나라의 앨리스, 그리고 소프트웨어 속 객체 역시 이 세 가지를 지닌다.

### 상태 (State)

상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도,  
행동의 결과를 쉽게 예측하고 설명할 수 있다.  
예: 비행기 탑승 가능 여부는 항공권의 발권 상태로 예측 가능

> 상태는 근본적으로 세상의 복잡성을 완화하고 인지 과부화를 줄일 수 있는 중요한 개념이다.

---

### 상태와 프로퍼티 (Property)

모든 것이 객체는 아니다.  
앨리스의 **키**, **위치**, 음료와 케이크의 **양**은 객체가 아니다.

이들은 다른 객체의 특성을 표현하거나 상태를 나타내는 **프로퍼티(property)** 라고 부른다.
- 프로퍼티 자체는 **정적(immutable)** 이지만
- 프로퍼티의 **값은 동적(mutable)** 이다.

> 모든 객체의 상태는 단순한 값 + 객체의 조합으로 표현 가능하다.  
> 객체는 자율적인 존재이며, **스스로 자신의 상태를 책임져야 한다.**

---

### 행동 (Behavior)

객체의 상태는 저절로 변경되지 않는다.  
**객체가 취하는 행동에 의해 상태가 변경**된다.  
이러한 행동은 **부수효과(side effect)** 를 초래한다.

앨리스가 문을 통과하는 행동을 통해 앨리스의 위치가 변화하는 부수효과를 초래한 것처럼 말이다.

---

#### 협력과 행동

객체가 협력하는 유일한 방법은 **다른 객체에게 요청을 보내는 것**이다.  
요청은 자기 자신의 상태뿐 아니라 **다른 객체의 상태 변경도 유발**할 수 있다.

---

#### 상태 캡슐화 (Encapsulation)

- 앨리스 객체의 키를 작게 만드는 건 앨리스 자신
- 음료 객체의 양을 줄이는 건 음료 자신

객체는 **상태를 캡슐 안에 감추고 외부에 노출하지 않는다.**  
외부에 노출하는 것은 오직 **행동뿐**이다.  
이것이 **캡슐화(encapsulation)** 이다.

---

#### 식별자 (Identity)

모든 객체는 고유한 **식별자**를 가지고 있으며  
이를 통해 객체를 구별할 수 있다.

객체는 **가변 상태(mutable state)** 를 가지며,  
상태가 다르더라도 **식별자가 같다면 동일한 객체**로 판단할 수 있다.  
→ **동일성(identity)**

어린 내 자신과 현재 내 자신은 동일한 인물이다. 상태는 다르더라도 동일하게 판단할 수 있는 일종의
식별자를 가지고 있지 않은가.

---

## 기계로서의 객체

객체 지향 개발자들은 객체의 상태를 조회하는 작업 즉 **쿼리**, 객체의 상태를 변경하는 즉 **명령**하는 것이 그들의 주된 업무이다.</br>

객체를 기계라 생각하면 외부의 버튼 외에는 다른 방법으로 이 기계를 사용할 수 없다. </br>
즉 명령과 쿼리로만 객체에 접근할 수 있다. </br>
명령과 쿼리는 객체가 외부에 제공하는 행동이라는 점에 주목해라.

---

## 행동이 상태를 결정한다

초보자들은 **상태 중심으로 객체를 바라보는 경향**이 있다.  
하지만 이는 나쁜 설계를 초래할 수 있다.

### 상태를 먼저 결정하면

1. **캡슐화**가 저해된다.
2. 객체가 **고립된 섬**이 된다.
3. **재사용성**이 저하된다.

> 즉 객체의 적합성을 결정하는 것은 상태가 아니라 객체의 행동이어야 한다.</br>
> 행동을 결정한 후에야 행동에 필요한 정보가 무엇인지를 고려해라

---

## 은유와 객체

객체지향 세계는 현실세계의 **단순한 모방**이 아니다.  
**모방**과 **추상화**는 객체 사이 관계를 명확히 설명하지 못한다.

---

### 의인화 (Anthropomorphism)

현실 속 트럼프 카드나 토끼는 말하지 못하지만,  
소프트웨어 객체는 전지전능하게 **모든 일을 할 수 있다**. </br>
이를 의인화(anthropomorphism)라 한다.

---

### 은유 (Metaphor)

객체지향 세계는 현실과 무관한 것이 아니다.  
유사성을 기반으로 한 **은유**를 통해 설명 가능하다.

예를 들어, 현실 속 전화기라는 개념을 통해 소프트웨어 객체를 묘사하면 (은유) </br>
그 객체가 전화를 걸 수 있다는 사실을 쉽게 이해하고 유지보수가 용이한 소프트웨어를 만들 수 있다.

---

## 이상한 나라를 창조하라

객체지향 설계자의 목적은 현실을 모방하는 것이 아니라, **이상한 나라를 창조하는 것**이다.  
앨리스를 매혹시킨 이상한 나라처럼.

---

## 🎯 2장의 핵심

당신이 창조한 객체의 특성을 상기시킬 수 있다면  
**현실 객체 도메인을 이용해 객체를 묘사하라.**

단, **모방하거나 현실을 닮아야 한다는 제약 없이** 말이다.
