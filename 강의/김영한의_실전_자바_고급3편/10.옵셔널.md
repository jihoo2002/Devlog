# 10ê°• ì˜µì…”ë„
### ğŸ“ ê¹€ì˜í•œ ì‹¤ì „ ìë°” ê³ ê¸‰í¸ 3 - ê°•ì˜ ì •ë¦¬ ë…¸íŠ¸

ì´ì „ê°•ì˜ì—ì„œ ê°„ë‹¨íˆ ë‚˜ì™“ë˜ ì˜µì…”ë„ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ì

```java
    // ì´ë¦„ì´ ìˆìœ¼ë©´ ì´ë¦„ì„ ëŒ€ë¬¸ìë¡œ ì¶œë ¥, ì—†ìœ¼ë©´ unknown ì¶œë ¥
    static void findAndPrint(long id) {
        String name = findNameById(id);
        // 1. nullPointerException ìœ ë°œ
        //System.out.println("name: " + name.toUpperCase());

        //2. if ë¬¸ì„ í™œìš©í•œ null ì²´í¬ í™œìš©
        if (name != null) {
            System.out.println(id + ": " + name.toUpperCase());
        } else {
            System.out.println(id + ": " + "UNKNOWN");
        }
    }
```
ê¸°ì¡´ì—ëŠ” NullPointerExceptionë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ null ì²´í¬ëŠ” ifë¬¸ì„ í™œìš©í•´ì•¼ë§Œ í–ˆë‹¤.

```java
    // ì´ë¦„ì´ ìˆìœ¼ë©´ ì´ë¦„ì„ ëŒ€ë¬¸ìë¡œ ì¶œë ¥, ì—†ìœ¼ë©´ unknown ì¶œë ¥
    static void findAndPrint(long id) {
        // ì˜µì…”ë„ ì‚¬ìš©í•˜ë©´ ê°’ì´ ìˆì„ìˆ˜ë„ ì—†ì„ìˆ˜ë„ ìˆë‹¤ë¼ëŠ” ê²ƒì„ ì¸ì§€í•˜ê³  êµ¬í˜„í•  ìˆ˜ ìˆê²Œ ë¨.
        Optional<String> optName = findNameById(id);
        String name = optName.orElse("UNKNOWN");
        System.out.println("name: " + name.toUpperCase());
    }
```
`Optional<String>`ì™€ ê°™ì´ ì˜µì…”ë„ì„ ë°˜í™˜í•˜ë„ë¡ í•˜ë©´ ê°’ì´ ì—†ì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë„ê°€ ì „ë‹¬ëœë‹¤.
ì½”ë“œë¥¼ ë³´ë©´ ì˜µì…”ë„ì˜ orElse(ëŒ€ì²´ê°’)ì„ í†µí•´ ê°’ì´ ì—†ë‹¤ë©´ ëŒ€ì²´ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆì–´
ë†“ì¹˜ê¸° ì‰¬ìš´ null ì²´í¬ë¥¼ ê°•ì œí•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ì„ ë†’ì¼ìˆ˜ ìˆë‹¤.

---

## Optionalì˜ ìƒì„±

```java
        //1. of() : ê°’ì´ null ì´ ì•„ë‹˜ì´ í™•ì‹¤í•  ë•Œ ì‚¬ìš©, null ì´ë©´ NullpointerException ë°œìƒ
        String nonNullValue = "Hello Optional";
        Optional<String> op1 = Optional.of(nonNullValue);

        //2. ofNullable() : ê°’ì´ nullì¼ìˆ˜ë„ ì•„ë‹ìˆ˜ë„ ìˆì„ë•Œ
        Optional<String> op2 = Optional.ofNullable("Hello!");
        Optional<String> op3 = Optional.ofNullable(null);

        // 3. empty()
        Optional<String> op4 = Optional.empty();
```
- Optional.of()ëŠ” ë‚´ë¶€ê°’ì´ í™•ì‹¤íˆ Nullì´ ì•„ë‹ ë•Œ ì‚¬ìš©í•œë‹¤.
  - null ì „ë‹¬í•˜ë©´ `NullPointerException` ì¼ì–´ë‚œë‹¤.
- Optional.ofNullable()ëŠ” ê°’ì´ nullì¼ ìˆ˜ë„ ì•„ë‹ìˆ˜ë„ ìˆì„ ë•Œ ì‚¬ìš©í•œë‹¤.
  - nullì´ë©´ Optional.empty() ë°˜í™˜
- Optional.empty()ëŠ” ëª…ì‹œì ìœ¼ë¡œ `ê°’ì´ ì—†ìŒ`ì„ í‘œí˜„í•œë‹¤.

---

## Optionalì˜ ê°’ íšë“
isPresent(), isEmpty() ê°’ì´ ìˆìœ¼ë©´ true, ì—†ìœ¼ë©´ false
get() ê°’ì´ ìˆëŠ” ê²½ìš° ê°’ ë°˜í™˜, ê°’ì´ ì—†ìœ¼ë©´ NoSuchElementException ë°œìƒí•˜ë¯€ë¡œ ì£¼ì˜
orElse() ê°’ì´ ìˆìœ¼ë©´ ê·¸ ê°’ì„ ë°˜í™˜, ê°’ì´ ì—†ìœ¼ë©´ otherë¥¼ ë°˜í™˜
orElseGet() ê°’ì´ ìˆìœ¼ë©´ ê°’ ë°˜í™˜, ì—†ìœ¼ë©´ supplier í˜¸ì¶œí•´ ìƒì„±ëœ ê°’ ë°˜í™˜
orElseThrow() ê°’ì´ ìˆìœ¼ë©´ ê·¸ ê°’ ë°˜í™˜, ì—†ìœ¼ë©´ ì˜ˆì™¸ ë˜ì§
or() ê°’ì´ ìˆìœ¼ë©´ í•´ë‹¹ ê°’ì˜ Optional ë°˜í™˜ ì—†ìœ¼ë©´ supplierê°€ ì œê³µí•˜ëŠ” ë‹¤ë¥¸ Optional ë°˜í™˜

---

## Optionalì˜ ê°’ ì²˜ë¦¬
ì˜µì…”ë„ì—ì„œ ê°’ì´ ì¡´ì¬í•  ë•Œì™€ ì¡´ì¬í•˜ì§€ ì•Šì„ë•Œ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ í™œìš©í•˜ë©´ null ì²´í¬ ë¡œì§ ì–´ëµ¤ì´
ì•ˆì „í•˜ê³  ê°„ê²°í•˜ê²Œ ê°’ì„ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ì
```java
System.out.println("=== 1. ifPresent() ===");
optValue.ifPresent(x -> System.out.println(x));
optEmpty.ifPresent(x -> System.out.println(x)); //ì‹¤í–‰ x
```
`ifPresent`ëŠ” ê°’ì´ ì¡´ì¬í•˜ë©´ action ì‹¤í–‰, ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠëŠ”ë‹¤.

```java
System.out.println("=== 2. ifPresentOrElse() ===");
optValue.ifPresentOrElse(
        v -> System.out.println("optvalue ê°’ " + v),
        () -> System.out.println("ê°’ ë¹„ì–´ìˆì§€ë¡±"));
```
`ifPresentOrElse`ëŠ” ê°’ì´ ì¡´ì¬í•˜ë©´ action ì‹¤í–‰í•˜ê³  ì—†ìœ¼ë©´ emptyActionì„ ì‹¤í–‰í•œë‹¤.

```java
System.out.println("=== 3. map() ===");
Optional<Integer> lengthOpt1 = optValue.map(String::length);
        System.out.println("optValue.map(String::length) = " + lengthOpt1);
```
mapì€ ê°’ì´ ìˆìœ¼ë©´ mapperë¥¼ ì ìš©í•´ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê³ 
ê°’ì´ ì—†ìœ¼ë©´ Optional.empty()ë¥¼ ë°˜í™˜í•œë‹¤.
```java
System.out.println("=== 4. flatMap() ===");
Optional<String> flattenedOpt = optValue.flatMap(s -> Optional.of(s));
System.out.println("flattenedOpt = " + flattenedOpt);
```
flatMapì€ mapê³¼ ìœ ì‚¬í•˜ì§€ë§Œ Optionalì„ ë°˜í™˜í•  ë•Œ ì¤‘ì²©ë˜ì§€ ì•Šê³  í‰íƒ„í™”í•´ì„œ ë°˜í™˜í•œë‹¤.

```java
System.out.println("=== 5. filter() ===");
Optional<String> filtered1 = optValue.filter(s -> s.startsWith("H"));
Optional<String> filtered2 = optValue.filter(s -> s.startsWith("X"));

System.out.println("filter(H) = " + filtered1);
System.out.println("filter(X) = " + filtered2);
```
filterëŠ” ê°’ì´ ìˆê³  ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. 

```java
System.out.println("=== 6. stream() ===");
        optValue.stream()
                .forEach(s -> System.out.println("optValue = " + s));

        // ê°’ì´ ì—†ì–´ì„œ ì‹¤í–‰ x
        optEmpty.stream()
                .forEach(s -> System.out.println("optEmpty = " + s));
```
ê°’ì´ ìˆìœ¼ë©´ ë‹¨ì¼ ìš”ì†Œë¥¼ ë‹´ì€ Streamì„ ë°˜í™˜í•˜ê³  ì—†ìœ¼ë©´, ë¹ˆ ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•œë‹¤.

---

## ì¦‰ì‹œ í‰ê°€ì™€ ì§€ì—° í‰ê°€
