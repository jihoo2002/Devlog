# 4ê°• ëŒë‹¤ í™œìš©
### ğŸ“ ê¹€ì˜í•œ ì‹¤ì „ ìë°” ê³ ê¸‰í¸ 3 - ê°•ì˜ ì •ë¦¬ ë…¸íŠ¸

## âš™ï¸ ì§ìˆ˜, í™€ìˆ˜ í•„í„°ì— ëŒë‹¤ í™œìš©
```java
public static void main(String[] args) {
    List<Integer> numbers = List.of(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

    //ì§ìˆ˜ë§Œ ê±°ë¥´ê¸°
    List<Integer> evenNumbers = filter(numbers, n -> n % 2 == 0);
    System.out.println(evenNumbers);

    // í™€ìˆ˜ë§Œ ê±°ë¥´ê¸°
    List<Integer> oddNumbers = filter(numbers, n -> n % 2 == 1);
    System.out.println(oddNumbers);
}

private static List<Integer> filter(List<Integer> numbers, Predicate<Integer> predicate) {
    List<Integer> filtered = new ArrayList<>();
    for (Integer number : numbers) {
        boolean testResult = predicate.test(number);
        if (testResult) {
            filtered.add(number);
        }
    }
    return filtered;
}
```
ê¸°ì¡´ì—ëŠ” ê°ê° í™€ìˆ˜, ì§ìˆ˜ë¥¼ í•„í„°ë§í•˜ëŠ” ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ì§€ë§Œ ëŒë‹¤ë¥¼ í™œìš©í•´ ì½”ë“œ ì¡°ê°ì„ `Predicate`ë¡œ ì²˜ë¦¬í•˜ë©´ í›¨ì”¬ ê°„í¸í•˜ë‹¤
í•´ë‹¹ ì¡°ê±´ì´ ë§ëŠ” ì§€ë¥¼ í™•ì¸í•˜ëŠ” ìš©ë„ì´ê¸°ì— `Predicate`ê°€ ì í•©í•˜ë‹¤.

---

## âš™ï¸ ì œë„¤ë¦­ í™œìš©
ìœ„ `filter` ë©”ì„œë“œë¥¼ ë³„ë„ì˜ ì œë„¤ë¦­ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë¡œ ë§Œë“¤ë©´
ë‹¤ì–‘í•œ íƒ€ì…ì„ ì ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.
```java
public static <T> List<T> filter(List<T> numbers, Predicate<T> predicate) {
    List<T> filtered = new ArrayList<>();
    for (T number : numbers) {
        if (predicate.test(number)) {
            filtered.add(number);
        }
    }
    return filtered;
}
```
### í™œìš©

```java
List<Integer> evenNumbers = GenericFilter.filter(numbers, n -> n % 2 == 0);
List<String> filter = GenericFilter.filter(strings, n -> n.length() >= 2);

```
ì œë„¤ë¦­ ë•ë¶„ì— Integer, String ë“± ë‹¤ì–‘í•œ íƒ€ì…ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§ í•  ìˆ˜ ìˆëŠ” ìœ ì—°í•œ í•„í„°ë§ìœ¼ë¡œ ë¦¬í™í„°ë§ë˜ì—ˆë‹¤.

---

## âš™ï¸ ë§µ ë§Œë“¤ê¸°
ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ê°’ì„ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ê³¼ì •ì„ ì´ë¯¸ í•´ë´¤ë˜ ì œë„¤ë¦­ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë¡œ
ë§Œë“¤ì–´ë³´ì

```java
public class GenericFilter {
    public static <T, R> List<R> map(List<T> list, Function<T, R> mapper) {
        // T : ì…ë ¥ , R : ì¶œë ¥(ë°˜í™˜)
        List<R> numbers = new ArrayList<>();
        for (T s : list) {
            numbers.add(mapper.apply(s));
        }
        return numbers;
    }
}
```

```java
List<String> upperFruits = GenericMapper.map(fruits, s -> s.toUpperCase());
List<Integer> lengthFruits = GenericMapper.map(upperFruits, s -> s.length());
```

`Function`ìœ¼ë¡œ ì½”ë“œì¡°ê°ì„ ì „ë‹¬í•˜ë©´ Stringì´ë“  Integer ë“  ë‹¤ì–‘í•œ íƒ€ì…ì˜ ê°’ì„ ë§¤í•‘í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

---

## í•„í„°ì™€ ë§µ í™œìš©
ì§ìˆ˜ë§Œ ë‚¨ê¸°ê³  ë‚¨ì€ ê°’ì˜ 2ë°°ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•´ë³´ì

```java
    static List<Integer> direct(List<Integer> numbers) { // TODO ì½”ë“œ ì‘ì„±
        //ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°
        List<Integer> result = new ArrayList<>();
        for (Integer number : numbers) {
            if (number % 2 == 0) {
                int numberX2 = number * 2;
                result.add(numberX2);
            }
        }
        return result;
    }
```
ê¸°ì¡´ì—ëŠ” forë¬¸ê³¼ ifë¬¸ì„ í™œìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‘ì„±í–ˆì„ ê²ƒì´ë‹¤. 
`ì–´ë–»ê²Œ(How)` í•„í„°ë§í•˜ê³  ë¦¬ìŠ¤íŠ¸ì— ë‹´ëŠ” ì§€ for, ifë¥¼ í†µí•´ ì§€ì‹œí•˜ê¸°ì— ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°ì´ë¼ í•œë‹¤.


### ê·¸ëŸ¼ ì´ë•Œê¹Œì§€ ë§Œë“¤ì—ˆë˜ í•„í„°ì™€ ë§µ ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•´ë³´ë©´?
```java
    static List<Integer> lambda(List<Integer> numbers) { // TODO ì½”ë“œ ì‘ì„±
        //ìš”êµ¬ì‚¬í•­ì„ ê·¸ëŒ€ë¡œ ì ì€ ê±° ê°™ì€ ëŠë‚Œì´ ë“¬, ì§ê´€ì ì„!
        List<Integer> filteredList = GenericFilter.filter(numbers, n -> n % 2 == 0);
        List<Integer> mappedList = GenericMapper.map(filteredList, n -> n * 2);
        return mappedList;
    }
```
í•„í„°í•˜ê³  ë³€í™˜í•˜ëŠ” ê²ƒì— ì´ˆì ì„ ë§ì¶° `ë¬´ì—‡ì„(What)` í•˜ê³ ì í•˜ëŠ” ì§€ê°€ ì§ê´€ì ìœ¼ë¡œ ë“œëŸ¬ë‚œë‹¤
ì´ëŸ¬í•œ ë°©ì‹ì„ ì„ ì–¸ì  í”„ë¡œê·¸ë˜ë°ì´ë¼ í•œë‹¤.
---

## âš”ï¸ ëª…ë ¹í˜• vs ì„ ì–¸ì  í”„ë¡œê·¸ë˜ë°

| í•­ëª©    | ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°                 | ì„ ì–¸í˜• í”„ë¡œê·¸ë˜ë°                     |
| ----- | ------------------------- | ----------------------------- |
| íŠ¹ì§•    | ë‹¨ê³„ë³„ ì‹¤í–‰<br>ìƒíƒœ ë³€í™”<br>ë‚®ì€ ì¶”ìƒí™” | ë¬¸ì œ í•´ê²°ì— ì§‘ì¤‘<br>ì½”ë“œ ê°„ê²°ì„±<br>ë†’ì€ ì¶”ìƒí™” |
| ì œì–´ ë°©ì‹ | for, while ë“± ì§ì ‘ ì œì–´        | ëŒë‹¤, ê³ ì°¨ í•¨ìˆ˜ë¡œ ìœ„ì„                 |
| ì˜ˆì‹œ    | `for`, `if`               | `filter`, `map`, `forEach` ë“±  |


---

## âš™ï¸ ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸°

#### ì°¸ê³  - ë©”ì„œë“œ ì²´ì¸ ë°©ì‹
```java
private static void methodChain(List<Integer> numbers) {
        List<Integer> result = new MyStreamV1(numbers)
                .filter(n -> n % 2 == 0)
                .map(n -> n * 2)
                .toList();
        System.out.println(result);
    }
```
ë©”ì„œë“œ ì²´ì¸ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ new ìƒì„±ì ë°©ì‹ì´ë‚˜, ì¤‘ê°„ ë³€ìˆ˜ë¥¼ ì œê±°í•˜ê³  ê¹”ë”í•˜ê²Œ í•„í„°ì™€ ë§µì„ í™œìš©í•˜ì—¬
ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤.

#### ì°¸ê³  - ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ 
```java
    private MyStreamV2(List<Integer> internalList) {
        this.internalList = internalList;
    }
```
ê¸°ë³¸ ìƒì„±ìë¥¼ `private` ìœ¼ë¡œ ë°”ê¾¸ê³  ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í™œìš©í•´ë³´ì

```java
    // static factory (ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ)
    public static MyStreamV2 of(List<Integer> internalList) {
        return new MyStreamV2(internalList);
    }
```

```java
 MyStreamV2 myStreamV2 = MyStreamV2.of(numbers);
```
ê·¸ëŸ¼ ê°ì²´ ìƒì„±í•  ë•Œ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í™œìš©í•˜ë©´ ëœë‹¤.

#### ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë€
ìƒì„±ì ëŒ€ì‹  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸°í™”í•˜ëŠ” ë¡œì§ì„ ìº¡ìŠí™”í•˜ëŠ” ì •ì  ë©”ì„œë“œì´ë‹¤.
ìƒì„±ìëŠ” ì´ë¦„ì„ ë¶€ì—¬í•  ìˆ˜ ì—†ë‹¤.  ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œëŠ” ì˜ë¯¸ì‡ëŠ” ì´ë¦„ì„ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ì¡´ì¬í•œë‹¤
ê·¸ëŸ¬ë‚˜ ê°ì²´ ìƒì„±ì´ ë‹¨ìˆœí•œ ê²½ìš°ì—ëŠ” ê¸°ë³¸ ìƒì„±ì ì“°ëŠ”ê²Œ ë” ì¢‹ë‹¤.

---
## ğŸ” ì™¸ë¶€ ë°˜ë³µ vs ë‚´ë¶€ ë°˜ë³µ
ìŠ¤íŠ¸ë¦¼ì˜ ìµœì¢…ê²°ê³¼ë¥¼ í•˜ë‚˜ì”© ì¶œë ¥í•´ì•¼ í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìƒê¸´ë‹¤ë©´?

```java
// ê¸°ì¡´
//ì ìˆ˜ê°€ 80ì  ì´ìƒì¸ í•™ìƒì˜ ì´ë¦„ì„ ì¶”ì¶œ
public static void main(String[] args) {

    List<String> list = MyStreamV3.of(students)
            .filter(s -> s.getScore() >= 80)
            .map(s -> s.getName())
            .toList();

//ì™¸ë¶€ ë°˜ë³µ
    for (String s : list) {
        System.out.println(s);
    }
}
```
ê¸°ì¡´ì—ëŠ” forë¬¸ì„ ì¨ì„œ ë°˜ë³µí•˜ì—¬ í•˜ë‚˜ì”© ì¶œë ¥í•˜ëŠ” ë°©ì‹ì„ ë– ì˜¬ë¦´ ê²ƒì´ë‹¤.
ì´ëŸ¬í•œ ê¸°ì¡´ forë¬¸, whileë¬¸ ê°™ì€ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìˆœíšŒí•˜ëŠ” ë°©ì‹ì„ ì™¸ë¶€ ë°˜ë³µ(External Iteration)ë¼ í•œë‹¤.
```java
    // ì¶”ê°€
    public void forEach(Consumer<T> consumer) {
        for (T element : internalList) {
            consumer.accept(element);
        }
    }
```
ì´ì œ ìŠ¤íŠ¸ë¦¼ í´ë˜ìŠ¤ì— forEach()ë¼ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ í™œìš©í•˜ì—¬ ì¶œë ¥í•´ë³´ì
ë°˜í™˜ ë°ì´í„°ê°€ ì—†ê³  í•˜ë‚˜ì”© ì¶œë ¥í•  ì†Œë¹„ë§Œ í•˜ë©´ ë˜ì„œ `Consumer`ë¥¼ ì‚¬ìš©í•˜ì

```java
        // ì¶”ê°€(ë‚´ë¶€ ë°˜ë³µ)
public static void main(String[] args) {
    MyStreamV3.of(students)
            .filter(s -> s.getScore() >= 80)
            .map(s -> s.getName())
            .forEach(name -> System.out.println("name" + name));
}
```
ê°ê°ì˜ ë°ì´í„°ë¥¼ forEach ë©”ì„œë“œê°€ ì¶œë ¥í•˜ë„ë¡ ì½”ë“œê°€ ë” ê°„ê²°í•´ì¡Œë‹¤.
ì§ì ‘ ë°˜ë³µì œì–´ë¬¸ì„ ì‘ì„±í•˜ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¼ ë‚´ë¶€ì—ì„œ ë°˜ë³µ ì²˜ë¦¬ë¥¼ ìœ„ì„í•˜ëŠ” ê²ƒì„ ë‚´ë¶€ ë°˜ë³µ(Internal Iteration)ì´ë¼ í•œë‹¤.

| êµ¬ë¶„ | ì™¸ë¶€ ë°˜ë³µ                       | ë‚´ë¶€ ë°˜ë³µ                 |
| -- | --------------------------- | --------------------- |
| ë°©ì‹ | for, while                  | forEach, stream ë‚´ë¶€ ì²˜ë¦¬ |
| ì¥ì  | ì„¸ë°€í•œ íë¦„ ì œì–´ (break, continue) | ê°„ê²°í•¨, ì—°ì† ì²˜ë¦¬ì— ìœ ë¦¬        |
| ì˜ˆì‹œ | `for (String s : list)`     | `.forEach(x -> ...)`  |




ğŸš¨í•„í„°, ë§µ, ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ í™œìš©í•œ ì„ ì–¸í˜• í”„ë¡œê·¸ë˜ë°ê³¼ ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°ì€ ì–´ë–¤ ê²ƒì´ ë” ë‚®ë‹¤ê³  í•  ìˆ˜ ì—†ê³ 
ìƒí™©ì— ë”°ë¼ ì ì ˆíˆ ë‘ ë°©ì‹ì„ í™œìš©í•˜ë©´ ëœë‹¤.